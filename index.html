<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>GAMEND - Ultra Pro Hub</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-database-compat.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <style>
        :root {
            --accent: #00f2ff;
            --bg: #05050a;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text: #ffffff;
            --border: rgba(255, 255, 255, 0.1);
        }

        /* 7 Premium Themes */
        body.light-theme { --bg: #f0f2f5; --card-bg: rgba(0,0,0,0.05); --text: #1a1a2e; --border: rgba(0,0,0,0.1); --accent: #0072ff; }
        body.neon-blue { --bg: #000b1a; --accent: #00f2ff; }
        body.emerald { --bg: #020d04; --accent: #00ff88; }
        body.crimson { --bg: #0d0202; --accent: #ff0044; }
        body.gold { --bg: #0d0a02; --accent: #ffcc00; }
        body.purple { --bg: #0a020d; --accent: #bf00ff; }

        body {
            background: var(--bg); color: var(--text); margin: 0; font-family: 'Inter', sans-serif;
            overflow-x: hidden; min-height: 100vh; transition: 0.4s;
        }

        #bg-canvas { position: fixed; inset: 0; z-index: -1; }

        /* Custom Popup Box */
        #custom-popup {
            display: none; position: fixed; inset: 0; z-index: 99999;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(15px);
            align-items: center; justify-content: center; padding: 20px;
        }
        .popup-box {
            background: var(--bg); border: 2px solid var(--accent); border-radius: 30px;
            width: 100%; max-width: 400px; max-height: 80vh; overflow-y: auto;
            padding: 25px; position: relative; box-shadow: 0 0 40px rgba(0, 242, 255, 0.2);
        }
        .popup-close { position: absolute; top: 15px; right: 20px; font-size: 28px; color: var(--accent); cursor: pointer; }

        /* Splash Screen */
        #splash-screen {
            position: fixed; inset: 0; z-index: 10000; background: #000;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .loader-logo { width: 100px; height: 100px; border-radius: 25px; box-shadow: 0 0 25px var(--accent); }
        .progress-bar { width: 60%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 10px; margin-top: 20px; overflow: hidden; }
        .progress-fill { width: 0%; height: 100%; background: var(--accent); transition: width 4s linear; }

        /* Navigation Tabs */
        .nav-tabs {
            position: sticky; top: 0; background: var(--bg); backdrop-filter: blur(20px); z-index: 1000;
            display: flex; overflow-x: auto; padding: 15px 10px; gap: 10px; border-bottom: 1px solid var(--border);
        }
        .nav-tabs::-webkit-scrollbar { display: none; }
        .tab {
            padding: 10px 20px; border-radius: 50px; background: var(--card-bg); border: 1px solid var(--border);
            font-size: 11px; font-weight: 800; white-space: nowrap; transition: 0.3s; color: var(--text);
        }
        .tab.active { background: var(--accent); color: #000; box-shadow: 0 0 15px var(--accent); }

        /* Menu */
        .menu-btn { position: fixed; right: 20px; top: 18px; z-index: 5001; color: var(--accent); font-size: 28px; cursor: pointer; }
        .menu-dropdown {
            position: fixed; right: 20px; top: 65px; background: var(--bg); border: 1px solid var(--border);
            border-radius: 20px; width: 190px; display: none; flex-direction: column; z-index: 5000; overflow: hidden;
        }
        .menu-item { padding: 15px 20px; font-size: 14px; border-bottom: 1px solid var(--border); color: var(--text); cursor: pointer; display: flex; align-items: center; gap: 12px; }
        .menu-item:active { background: var(--card-bg); }
        
        /* Grid Layout */
        .section-header { width: 90%; max-width: 500px; margin: 20px auto 10px; text-align: left; font-size: 14px; font-weight: 800; color: var(--accent); letter-spacing: 1px; }
        .grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; padding: 0 20px 20px; max-width: 500px; margin: 0 auto; }
        .card { background: var(--card-bg); border: 1px solid var(--border); border-radius: 24px; padding: 15px; text-align: center; cursor: pointer; transition: 0.2s; position: relative; }
        .card:active { transform: scale(0.95); border-color: var(--accent); }
        .icon-img { width: 100%; aspect-ratio: 1; border-radius: 18px; object-fit: cover; margin-bottom: 10px; }
        .card p { margin: 0; font-weight: 700; font-size: 14px; }
        
        .share-btn { background: var(--accent); color: #000; padding: 16px 40px; border-radius: 100px; font-weight: 900; border: none; margin: 30px auto; display: block; cursor: pointer; box-shadow: 0 0 20px var(--accent); }

        /* Theme Selector */
        .theme-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 12px; margin: 15px 0; }
        .theme-dot { width: 100%; aspect-ratio: 1; border-radius: 12px; border: 2px solid rgba(255,255,255,0.2); cursor: pointer; }

        #game-view { display: none; position: fixed; inset: 0; z-index: 9999; background: #000; }
        iframe { width: 100%; height: 100%; border: none; }
        
        /* Add this inside your <style> tag */
.game-section { 
    display: none; 
    animation: fadeIn 0.4s ease; 
}
.game-section.active { 
    display: block; 
}

@keyframes fadeIn { 
    from { opacity: 0; transform: translateY(10px); } 
    to { opacity: 1; transform: translateY(0); } 
}
        /* Custom Report Popup Style */
#report-modal {
    position: fixed; inset: 0; background: rgba(0,0,0,0.85);
    display: none; align-items: center; justify-content: center; z-index: 99999;
}
.modal-card {
    background: var(--bg); border: 1px solid var(--accent); border-radius: 25px;
    width: 85%; max-width: 320px; padding: 25px; text-align: center;
    box-shadow: 0 0 30px rgba(0, 242, 255, 0.2);
}
.modal-btn-row { display: flex; gap: 10px; margin-top: 20px; }
.m-btn {
    flex: 1; padding: 12px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer;
}
.m-send { background: var(--accent); color: #000; }
.m-cancel { background: rgba(255,255,255,0.1); color: #fff; }
        

    </style>
</head>
<body onclick="closeMenu()">

    <canvas id="bg-canvas"></canvas>

    <div id="splash-screen">
        <img src="https://mozhihub.github.io/Mad-drive/img/drivemad.png" class="loader-logo">
        <h2 style="letter-spacing: 4px; color: #fff;">GAMEND PRO</h2>
        <div class="progress-bar"><div class="progress-fill" id="fill"></div></div>
    </div>

    <div id="custom-popup">
        <div class="popup-box">
            <div class="popup-close" onclick="hidePopup()">&times;</div>
            <div id="popup-inner"></div>
        </div>
    </div>

    <div class="menu-btn" onclick="toggleMenu(event)">‚ãÆ</div>
    <div class="menu-dropdown" id="dropdown">
        <div class="menu-item" onclick="openSettings()"><i class="fa fa-sliders"></i> System Settings</div>
        <div class="menu-item" onclick="openAbout()"><i class="fa fa-rocket"></i> About Gaming</div>
        <div class="menu-item" onclick="openContact()"><i class="fa fa-headset"></i> Full Contact</div>
        <div class="menu-item" onclick="logicReport()"><i class="fa fa-bug"></i> Report Bug</div>
    </div>

    <div id="hub-content" style="display:none;">
        <div style="padding: 55px 25px 5px; text-align: center;">
            <div style="font-size: 32px; font-weight: 900; color: var(--accent); text-shadow: 0 0 15px var(--accent);">GAMEND HUB</div>
            <div style="color: #00ff88; font-size: 11px; margin-top: 5px; font-weight: bold;">‚óè <span id="online-val">...</span> PLAYERS ACTIVE</div>
        </div>

<div class="nav-tabs">
            <div class="tab active" onclick="switchTab(0, 'all')">üåü ALL GAMES</div>
            <div class="tab" onclick="switchTab(1, 'racing')">üèéÔ∏è RACING</div>
            <div class="tab" onclick="switchTab(2, 'arcade')">üïπÔ∏è ARCADE</div>
            <div class="tab" onclick="switchTab(3, 'puzzle')">üß© PUZZLE</div>
            <div class="tab" onclick="switchTab(4, 'creative')">üé® CREATIVE</div>
            <div class="tab" onclick="switchTab(5, 'social')">‚ù§Ô∏è SOCIAL</div>
        </div>

        <div id="all" class="game-section active">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/Mad-drive/')"><img src="etc/drive.jpg" class="icon-img"><p>Mad Drive</p><span class="tag">Racing</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Knife/')"><img src="etc/knife.jpg" class="icon-img"><p>Knife Hit</p><span class="tag">Arcade</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Hexa/')"><img src="etc/hexa.jpg" class="icon-img"><p>Hexa Master</p><span class="tag">Puzzle</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Paint/')"><img src="etc/paint.jpg" class="icon-img"><p>Paint</p><span class="tag">Creative</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Earth-/')"><img src="etc/earth.jpg" class="icon-img"><p>Earth</p><span class="tag">Creative</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/insto/')"><img src="etc/insto.jpg" class="icon-img"><p>Insto</p><span class="tag">Social</span></div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Love-Calculator/')"><img src="etc/love.jpg" class="icon-img"><p>Love Calc</p><span class="tag">Fun</span></div>
            </div>
        </div>

        <div id="racing" class="game-section">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/Mad-drive/')">
                    <img src="etc/drive.jpg" class="icon-img"><p>Mad Drive</p><span class="tag">Racing</span>
                </div>
            </div>
        </div>

        <div id="arcade" class="game-section">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/Knife/')">
                    <img src="etc/knife.jpg" class="icon-img"><p>Knife Hit</p><span class="tag">Arcade</span>
                </div>
            </div>
        </div>

        <div id="puzzle" class="game-section">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/Hexa/')">
                    <img src="etc/hexa.jpg" class="icon-img"><p>Hexa Master</p><span class="tag">Puzzle</span>
                </div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Cube/')">
                    <img src="etc/cube.jpg" class="icon-img"><p>Rubik's Cube</p><span class="tag">Puzzle</span>
                </div>
            </div>
        </div>

        <div id="creative" class="game-section">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/Paint/')">
                    <img src="etc/paint.jpg" class="icon-img"><p>Paint</p><span class="tag">Creative</span>
                </div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Earth-/')">
                    <img src="etc/earth.jpg" class="icon-img"><p>Earth</p><span class="tag">Creative</span>
                </div>
            </div>
        </div>

        <div id="social" class="game-section">
            <div class="grid">
                <div class="card" onclick="openGame('https://mozhihub.github.io/insto/')">
                    <img src="etc/insto.jpg" class="icon-img"><p>Insto</p><span class="tag">Social</span>
                </div>
                <div class="card" onclick="openGame('https://mozhihub.github.io/Love-Calculator/')">
                    <img src="etc/love.jpg" class="icon-img"><p>Love Calc</p><span class="tag">Fun</span>
                </div>
            </div>
        </div>


        <button class="share-btn" onclick="shareBot()">INVITE FRIENDS</button>
    </div>

    <div id="game-view"><iframe id="game-iframe"></iframe></div>

    <script>
        const tg = window.Telegram.WebApp;
        const hub = document.getElementById('hub-content');
        const gameView = document.getElementById('game-view');
        const gameIframe = document.getElementById('game-iframe');
        const popup = document.getElementById('custom-popup');
        const inner = document.getElementById('popup-inner');

        tg.expand();
        tg.enableClosingConfirmation();

        tg.onEvent('backButtonClicked', () => {
            if (gameView.style.display === 'block') {
                tg.showConfirm("Exit game?", (ok) => { if(ok) closeGame(); });
            } else if(popup.style.display === 'flex') {
                hidePopup();
            } else {
                tg.showConfirm("Exit App?", (ok) => { if(ok) tg.close(); });
            }
        });

        function openGame(url) {
            gameIframe.src = url;
            gameView.style.display = 'block';
            hub.style.display = 'none';
            tg.BackButton.show();
        }
        function closeGame() { gameView.style.display = 'none'; gameIframe.src = ""; hub.style.display = 'block'; }
        function toggleMenu(e) { e.stopPropagation(); const dd = document.getElementById('dropdown'); dd.style.display = (dd.style.display === 'flex') ? 'none' : 'flex'; }
        function closeMenu() { document.getElementById('dropdown').style.display = 'none'; }
        function hidePopup() { popup.style.display = 'none'; }
        function showPopup(html) { inner.innerHTML = html; popup.style.display = 'flex'; }

        // --- FIXED REPORT LOGIC ---
        function logicReport() {
            closeMenu();
            tg.showConfirm("Open your email app to report a bug?", (ok) => {
                if(ok) {
                    window.location.href = "mailto:kaviyarasan@mozhihub.com?subject=Gamend Bot Bug Report&body=Device: " + tg.platform;
                }
            });
        }

        // --- SETTINGS ---
        function openSettings() {
            showPopup(`
                <h3 style="color:var(--accent); margin-top:0;">‚öôÔ∏è System Settings</h3>
                <p style="font-size:12px; opacity:0.8;">Choose Visual Theme:</p>
                <div class="theme-grid">
                    <div class="theme-dot" style="background:#05050a" onclick="setTheme('dark')"></div>
                    <div class="theme-dot" style="background:#f0f2f5" onclick="setTheme('light')"></div>
                    <div class="theme-dot" style="background:#000b1a" onclick="setTheme('blue')"></div>
                    <div class="theme-dot" style="background:#020d04" onclick="setTheme('green')"></div>
                    <div class="theme-dot" style="background:#0d0202" onclick="setTheme('red')"></div>
                    <div class="theme-dot" style="background:#0d0a02" onclick="setTheme('gold')"></div>
                    <div class="theme-dot" style="background:#0a020d" onclick="setTheme('purple')"></div>
                </div>
                <p style="font-size:12px; opacity:0.8; margin-top:15px;">Audio & Display:</p>
                <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:15px;">
                   <div style="display:flex; justify-content:space-between; margin-bottom:10px;"><span>Volume</span><span>80%</span></div>
                   <input type="range" style="width:100%; accent-color:var(--accent)">
                </div>
            `);
        }

        function setTheme(t) {
            document.body.className = '';
            if(t==='light') document.body.classList.add('light-theme');
            else if(t==='blue') document.body.classList.add('neon-blue');
            else if(t==='green') document.body.classList.add('emerald');
            else if(t==='red') document.body.classList.add('crimson');
            else if(t==='gold') document.body.classList.add('gold');
            else if(t==='purple') document.body.classList.add('purple');
            hidePopup();
        }

        // --- ABOUT ---
        function openAbout() {
            showPopup(`
                <img src="https://mozhihub.github.io/Mad-drive/img/drivemad.png" style="width:100%; border-radius:20px; margin-bottom:15px; box-shadow:0 10px 20px rgba(0,0,0,0.5);">
                <h3 style="color:var(--accent); margin:0;">GAMEND PRO HUB</h3>
                <div style="max-height:160px; overflow-y:auto; text-align:left; font-size:13px; line-height:1.6; margin-top:15px; padding-right:5px; color:rgba(255,255,255,0.8);">
                    Welcome to Gamend Pro, the ultimate cloud gaming destination on Telegram. Our platform is built using Zero-Lag technology to ensure the smoothest arcade experience.
                    <br><br>
                    Every game is optimized for mobile performance. We are constantly adding new titles to our racing, arcade, and puzzle sections.

                    developer by: kaviyarasan@mozhihub.com
                </div>
            `);
        }

                // --- CONTACT WITH SOCIAL LINKS ---
        function openContact() {
            showPopup(`
                <h3 style="color:#00ff88; margin-top:0;">üìû FULL CONTACT</h3>
                <div style="text-align:left; margin-top:15px;">
                    <div style="background:rgba(255,255,255,0.05); padding:15px; border-radius:20px; border:1px solid var(--border);">
                        <p style="margin:5px 0;"><i class="fa fa-globe" style="width:25px; color:var(--accent);"></i> mozhihub.com</p>
                        <p style="margin:5px 0;"><i class="fa fa-envelope" style="width:25px; color:var(--accent);"></i> info@mozhihub.com</p>
                    </div>
                    <p style="text-align:center; font-size:12px; margin:20px 0 10px;">Follow Socially</p>
                    <div style="display:grid; grid-template-columns: repeat(3, 1fr); gap: 20px; text-align:center; font-size:28px;">
                        <i class="fab fa-instagram" style="color:#e1306c" onclick="tg.openLink('https://www.instagram.com/mozhi.hub')"></i>
                        <i class="fab fa-facebook" style="color:#1877f2" onclick="tg.openLink('https://www.facebook.com/Mozhihub.in/')"></i>
                        <i class="fab fa-linkedin" style="color:#0a66c2" onclick="tg.openLink('https://www.linkedin.com/company/mozhihub/')"></i>
                        <i class="fab fa-at" style="color:#ffffff" onclick="tg.openLink('https://www.threads.com/@mozhi.hub')"></i>
                        <i class="fab fa-twitter" style="color:#1da1f2" onclick="tg.openLink('https://x.com/mozhihub')"></i>
                        <i class="fab fa-whatsapp" style="color:#25d366" onclick="tg.openLink('https://whatsapp.com/channel/0029VaSERj37DAX6TuAT2A0D')"></i>
                    </div>
                </div>
            `);
        }


                                                function logicReport(e) {
            if(e) e.stopPropagation(); 
            closeMenu(); 
            // Telegram popup-ku badhula namba custom modal-ai open pannuvom
            document.getElementById('report-modal').style.display = 'flex';
        }

        function closeReportModal() {
            document.getElementById('report-modal').style.display = 'none';
        }

        function goToReportChannel() {
            closeReportModal();
            // Direct link trigger
            tg.openTelegramLink("https://t.me/MozhiHub/54?comment=BUG_REPORT:");
        }






        function switchTab(index, id) {
    // Ellaa tab-layum 'active' class-ai remove pannu
    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
    // Ellaa game-section-aiyum maraichidu (hide)
    document.querySelectorAll('.game-section').forEach(s => s.classList.remove('active'));
    
    // Click panna tab-kku 'active' class kodu
    document.querySelectorAll('.tab')[index].classList.add('active');
    
    // Click panna section-ai mattum kaamikka 'active' class kodu
    const targetSection = document.getElementById(id);
    if(targetSection) {
        targetSection.classList.add('active');
    }

    if(tg.HapticFeedback) tg.HapticFeedback.impactOccurred('medium');
}


        const canvas = document.getElementById('bg-canvas');
        const ctx = canvas.getContext('2d');
        let dots = [];
        function initCanvas() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            dots = [];
            for(let i=0; i<25; i++) dots.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, vx: Math.random()-0.4, vy: Math.random()-0.4});
        }
        function draw() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "rgba(0, 242, 255, 0.2)";
            dots.forEach(d => {
                d.x += d.vx; d.y += d.vy;
                if(d.x<0 || d.x>canvas.width) d.vx*=-1;
                if(d.y<0 || d.y>canvas.height) d.vy*=-1;
                ctx.beginPath(); ctx.arc(d.x, d.y, 1.2, 0, Math.PI*2); ctx.fill();
            });
            requestAnimationFrame(draw);
        }
        initCanvas(); draw();

        window.onload = () => {
            document.getElementById('fill').style.width = '100%';
            setTimeout(() => { document.getElementById('splash-screen').style.display = 'none'; hub.style.display = 'block'; tg.BackButton.show(); }, 4000);
        };

        function shareBot() { tg.openTelegramLink("https://t.me/share/url?url=https://t.me/gamendbot&text=Play Best Arcade Games!"); }
        
        const firebaseConfig = { apiKey: "AIzaSyBb0upYoLF4_isVBfJUAMOEflMCgl5_5aE", databaseURL: "https://game-3a2e9-default-rtdb.asia-southeast1.firebasedatabase.app", projectId: "game-3a2e9" };
        if (!firebase.apps.length) firebase.initializeApp(firebaseConfig);
        firebase.database().ref('global_players').on('value', snap => { document.getElementById('online-val').innerText = snap.val() || 1; });
    </script>
    <div id="report-modal">
    <div class="modal-card">
        <h3 style="color:var(--accent); margin-top:0;">üêû Report Bug</h3>
        <p style="font-size:14px; opacity:0.8;">Found a bug? Click "Report" to share it in our Community Comment section.</p>
        <div class="modal-btn-row">
            <button class="m-cancel" onclick="closeReportModal()">Cancel</button>
            <button class="m-send" onclick="goToReportChannel()">Report</button>
        </div>
    </div>
    </div>
    
</body>
</html>
